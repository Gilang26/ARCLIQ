<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ARCLIQ Connect â€” Diagnostic Build</title>
<style>
body{font-family:sans-serif;background:#f3f6ff;margin:0;padding:2rem;color:#111}
button{background:#5468ff;color:#fff;border:0;padding:12px 20px;
border-radius:10px;font-size:16px;cursor:pointer}
pre{background:#061e2e;color:#bfeef9;padding:12px;border-radius:10px;
min-height:150px;white-space:pre-wrap}
</style>
</head>
<body>
<h1>ARCLIQ Connect Debug</h1>
<button id="connect">ðŸ”— Connect MetaMask</button>
<pre id="log">Initializing test...</pre>

<script>
const logBox=document.getElementById("log");
function log(msg){
  logBox.textContent+="\n"+msg;
  logBox.scrollTop=logBox.scrollHeight;
}

// Tes apakah window.ethereum terdeteksi
if(typeof window.ethereum!=="undefined"){
  log("âœ… MetaMask terdeteksi di browser ini.");
}else{
  log("âŒ MetaMask TIDAK terdeteksi! Pastikan buka di MetaMask app browser.");
}

// Pasang listener
document.getElementById("connect").addEventListener("click",async()=>{
  try{
    if(!window.ethereum){log("âŒ window.ethereum tidak ada!");return;}
    log("â³ Meminta izin koneksi ke MetaMask...");
    const accounts=await window.ethereum.request({method:"eth_requestAccounts"});
    const chainId=await window.ethereum.request({method:"eth_chainId"});
    log("âœ… Connected Address: "+accounts[0]);
    log("ðŸŒ Chain ID: "+chainId);
  }catch(err){
    log("âŒ Gagal connect: "+(err.message||err));
  }
});

// Tambah event log untuk deteksi perubahan account/chain
if(window.ethereum){
  window.ethereum.on('accountsChanged',(acc)=>{
    log("ðŸ”„ Account berubah: "+JSON.stringify(acc));
  });
  window.ethereum.on('chainChanged',(cid)=>{
    log("ðŸ”„ Chain berubah: "+cid);
  });
}
</script>
</body>
</html>
